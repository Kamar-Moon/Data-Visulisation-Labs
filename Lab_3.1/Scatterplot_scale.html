
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="description"    content="Data Visualisation Exercise 2"/>
    <meta name="keywords"         content="HTML, D3"/>
    <meta name="author"           content="Kamar"/>
    <title>Task 3.1 D3 Scaling your Charts</title>
    <!--Insert description of exercise  -->
    <!--Intro to D3 Drawing with Data -->

    <!--D3 Library v7 web link to ensure use of up to date library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<style>
    footer{
    background-color: rgb(231, 160, 160);
    background-clip: content-box;
    text-align:center;
    position: absolute;
    bottom: 0; /* Align footer to the bottom */
    width: 100%; /* Ensure the footer spans the full width */
    }

    #task{
        text-align: center;
    }

    .over{
        color:red;
    }
    </style>

<body>
    <h1 id="task">Task 3.1 D3 Scaling your Charts</h1>
    <script>

        //data set
        var dataset = [
                  [ 5,     20 ],
                  [ 480,   90 ],
                  [ 250,   50 ],
                  [ 100,   33 ],
                  [ 330,   95 ],
                  [ 410,   12 ],
                  [ 475,   44 ],
                  [ 25,    67 ],
                  [ 85,    21 ],
                  [ 220,   88 ]
              ];

        var w = 500;
        var h = 100;

        var xScale = d3.scaleLinear() //scale for the x value
                        .domain([d3.min(dataset, function(d){//calculate min value
                            return d[0]; //first data point in array
                        }),
                        d3.max(dateset, function(d){ //calculate max
                            return d[0];
                        })])
                        .range([0, w]); //w is width of svg canvas



        var yScale = d3.scaleLinear() //scale for the y value
                        .domain([d3.min(dataset, function(d){//calculate min value
                            return d[1]; //first data point in array
                        }),
                        d3.max(dateset, function(d){ //calculate max
                            return d[1];
                        })])
                        .range([0, h]); //h is height of svg canvas      
                        
        //SVG canvas                
        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);

        //Add Circles
        svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr("cx",  function(d, i){
                return xScale(d[0]);
            })
            .attr("cy", function(d){
                return yScale(d[1]);
            })
            .attr("r", function(d){
                return Math.sqrt(h - d[1]); // make circle size dynamic by using the y value d[1]. we need to calculate the radius r then set that
                //make the top circles bigger use -h

            })
            
            //circle colour
            .attr("fill", function(d) {
                var dataValue = d[1] //access the second value y in an inner array
                return "rgb(0, 0, " + (dataValue * 5) + ")"; //change colour of circle based on y value * 5
            })

            //labels Code
        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d){
                return d[0] + "," + d[1]
            })
            //get x and y coordinates from data values [0] and [1]
            .attr("x", function(d){
                return xScale(d[0]);
            })
            .attr("y",function(d){
                return yScale(d[1]);
            })
            //styles
            .attr("font-family", "sans-serif")
            .attr("font-size", "14px")
            .attr("fill", "red");
                                

    </script>
<footer>COS30045 Data Visualisation Semester 1 2024</footer>
</body>
</html>
